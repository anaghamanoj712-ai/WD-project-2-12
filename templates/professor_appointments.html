{% extends "base.html" %}
{% block title %}Student Appointments - Professor{% endblock %}
{% block extra_css %}
<style>
.back-btn {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    background: #fff;
    color: #000;
    padding: 10px 20px;
    border-radius: 8px;
    text-decoration: none;
    font-weight: 600;
    font-size: 14px;
    transition: all 0.3s ease;
    margin-bottom: 20px;
}

.back-btn:hover {
    background: #f0f0f0;
    transform: translateX(-4px);
    box-shadow: 0 4px 12px rgba(255, 255, 255, 0.2);
}

.prof-apps-header {
    background: #1a1a1a;
    border: 1px solid #2a2a2a;
    border-radius:16px; margin-bottom:25px; padding:28px 26px 15px 30px;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
}
.prof-approve-table {
    width:100%; border-collapse: collapse; background: #1a1a1a; border-radius: 13px; box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3); overflow: hidden; border: 1px solid #2a2a2a;
}
.prof-approve-table th, .prof-approve-table td {
    padding: 13px 8px; font-size:0.95rem;
    color: #e0e0e0; border: 1px solid #333; text-align:center;
}
.prof-approve-table th {
    background: #252525;
    font-weight: 800; font-size: 1.08rem; color: #fff;
}
.prof-approve-table tr:nth-child(even) { background:#202020;}
.status-pill {
    font-weight:600; border-radius:12px; padding:6px 12px; display:inline-block;
    font-size:0.95em; letter-spacing:0.5px;
}
.status-pending { background:rgba(255, 165, 0, 0.1); color:#ffa500; border: 1px solid rgba(255, 165, 0, 0.2); }
.status-accepted { background:rgba(0, 255, 0, 0.1); color:#00ff00; border: 1px solid rgba(0, 255, 0, 0.3); }
.status-declined { background:rgba(255, 0, 0, 0.1); color:#ff0000; border: 1px solid rgba(255, 0, 0, 0.2); }
.profact-btn, .profdecl-btn {
    display:inline-block; padding: 5px 14px; border-radius:6px; font-weight:700; margin:2px 2px; text-decoration: none;
}
.profact-btn       { background:linear-gradient(135deg, #667eea 0%, #5a6fd8 100%); color:#fff; }
.profdecl-btn      { background:#333; color:#ccc; border: 1px solid #444; }
.profact-btn:hover { transform: translateY(-1px); box-shadow: 0 2px 8px rgba(102, 126, 234, 0.4); }
.profdecl-btn:hover{ background:#444; color:#fff;}
</style>
{% endblock %}
{% block content %}
<div class="prof-apps-header">
    <h1 style="font-weight:900; color:#fff;font-size:2rem; margin-bottom:7px;">ðŸ“… Student Appointment Requests</h1>
    <p style="color:#999;">Approve or decline meeting requests. All actions will update for the student in real-time.</p>
</div>
<table class="prof-approve-table">
    <tr>
        <th>Student</th><th>Email</th><th>Roll No</th>
        <th>Date</th><th>Slot</th><th>Room</th>
        <th>Purpose</th><th>Status</th><th>Action</th>
    </tr>
    {% for appt in appointments %}
    <tr>
        <td>{{ appt['student_name'] }}</td>
        <td>{{ appt['student_email'] }}</td>
        <td>{{ appt['student_id'] }}</td>
        <td>{{ appt['appointment_date'] }}</td>
        <td>{{ appt['day_of_week'] }}, {{ appt['start_time'] }}â€“{{ appt['end_time'] }}</td>
        <td>{{ appt['room_number'] or 'â€”' }}</td>
        <td>{{ appt['purpose'] }}</td>
        <td>
            {% if appt['status'] == "pending" %}
                <span class="status-pill status-pending">Pending</span>
            {% elif appt['status'] == "accepted" %}
                <span class="status-pill status-accepted">Accepted</span>
            {% else %}
                <span class="status-pill status-declined">Declined</span>
            {% endif %}
        </td>
        <td>
            {% if appt['status'] == "pending" %}
            <a href="{{ url_for('update_appointment', appointment_id=appt['id'], action='accept') }}" class="profact-btn">Accept</a>
            <a href="{{ url_for('update_appointment', appointment_id=appt['id'], action='decline') }}" class="profdecl-btn">Decline</a>
            {% else %}
            <span style="font-size: 1.2em; color:#888;">â€”</span>
            {% endif %}
        </td>
    </tr>
    {% endfor %}
</table>
{% endblock %}
